# by: superzerosec

# Set prefix
set -g prefix C-s

# Enable mouse mode
set -g mouse on

# Toggle mouse on
bind-key M \
  set-option -g mouse on \;\
  display-message 'Mouse: ON'

# Toggle mouse off
bind-key m \
  set-option -g mouse off \;\
  display-message 'Mouse: OFF'

# Rename
set -g allow-rename off

# Set mode-key
setw -g mode-keys vi

# Key binding
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Shift arrow to switch windows
bind -n S-Left  previous-window
bind -n S-Right next-window

# Split window
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# Status colour 
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

# Configure the catppuccin plugin
set -g @catppuccin_flavor "mocha"
# set -g @catppuccin_window_status_style "rounded"

# Customise the status line
set -g status-fg  white
set -g status-bg  black
set -g status-left-length 100
set -g status-right-length 100
set -g status-left '#{E:@catppuccin_status_session}'
set -g status-right "#[bg=#{@thm_flamingo},fg=#{@thm_crust}]#[reverse]#[noreverse]CPU "
set -ag status-right '#[fg=#{cpu_fg_color},bg=#{cpu_bg_color}] #{cpu_percentage} '
# set -g status-right "#[bg=#{@thm_flamingo},fg=#{@thm_crust}]#[reverse]#[noreverse]RAM "
# set -agF status-right '#[fg=#{ram_fg_color},bg=#{ram_bg_color}] #{ram_percentage}'
set -ag status-right "#[bg=#{@thm_flamingo},fg=#{@thm_crust}]#[reverse]#[noreverse]RAM "
set -ag status-right '#[fg=#{@thm_fg},bg=#{@thm_mantle}] #{ram_percentage}'
set -g @catppuccin_window_fill "number"
set -g @catppuccin_window_text "#W#{?window_zoomed_flag,(),}"
set -g @catppuccin_window_current_fill "number"
set -g @catppuccin_window_current_text "#W#{?window_zoomed_flag,(),}"

# Add the plugin
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'catppuccin/tmux'
set -g @plugin 'omerxx/tmux-floax'
set -g @floax-width '80%'
set -g @floax-height '80%'
set -g @floax-border-color 'blue'
set -g @floax-text-color 'white'
set -g @floax-bind 'f'

# Initialize TMUX plugin manager (keep this at the bottom)
run  '~/.tmux/plugins/tmux-cpu/cpu.tmux'
run '~/.tmux/plugins/tpm/tpm'

# Configure windows
set -g base-index 1
set -g renumber-windows on
set -g pane-active-border-style "fg=#{@thm_red},bold,bg=default"
set -g pane-border-style 'fg=#{@thm_overlay_2},bg=default'
